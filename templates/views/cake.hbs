<!DOCTYPE html>
<html>
	<head>
		<title>Ekart</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link 
rel="stylesheet" 
href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" 
integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" 
crossorigin="anonymous">
		<link href="/css/menu.css" rel="stylesheet" type="text/css"/>
        <link href="/css/footer.css" rel="stylesheet" type="text/css"/>
		<link href="/css/header.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
        {{>header}}
		<div class="container panel-margin">
			<div class="row text-center">
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/1.jpg" alt="shirt">
						<div class="caption">
							<h3>POUND</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1200</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/2.jpg" alt="Shirt">
						<div class="caption">
							<h3>GENOISE CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1000</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/3.jpg" alt="Shirt">
						<div class="caption">
							<h3>CHIFFON CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1350</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/4.jpg" alt="Shirt">
						<div class="caption">
							<h3> BUTTER CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1400</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
			</div>
			<div class="row text-center">
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/5.jpg" alt="Shirt">
						<div class="caption">
							<h3>RED VELVET CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 700</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/6.jpg" alt="Shirt">
						<div class="caption">
							<h3>CARROT CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1500</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/7.jpg" alt="Shirt">
						<div class="caption">
							<h3>SPONGE CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1700</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/8.jpg" alt="Shirt">
						<div class="caption">
							<h3>ANGEL FOOD CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1600</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
			</div>
			<div class="row text-center">
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/9.jpg" alt="Shirt">
						<div class="caption">
							<h3>UPSIDE DOWN CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1400</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/10.jpg" alt="Shirt">
						<div class="caption">
							<h3>DEVIL FOOD CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1600</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/11.jpg" alt="Shirt">
						<div class="caption">
							<h3>HUMMINGBIRD CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1300</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6">
					<div class="thumbnail">
						<img src="./images/Food_Category/cake/12.jpg" alt="Shirt">
						<div class="caption">
							<h3>OPERA CAKE</h3>
							<p>Price: <i class="fa fa-rupee"></i> 1000</p>
							<a class="add-cart cart1 btn btn-danger" href="#">Add Cart</a>
						</div>
					</div>
				</div>
			</div>
		</div>
        {{>footer}}

		<script>
			let carts=document.querySelectorAll('.add-cart');

			let products=[
				{
					name: 'POUND',tag: '1',price:1200,inCart: 0
				},{
					name: 'GENOISE_CAKE',tag: '2',price:1000,inCart: 0
				},{
					name: 'CHIFFON_CAKE',tag: '3',price:1350,inCart: 0
				},{
					name: 'BUTTER_CAKE',tag: '4',price:1400,inCart: 0
				},{
					name: 'RED_VELVET_CAKE',tag: '5',price:700,inCart: 0
				},{
					name: 'CARROT_CAKE',tag: '6',price:1500,inCart: 0
				},{
					name: 'SPONGE_CAKE',tag: '7',price:1700,inCart: 0
				},{
					name: 'ANGEL_FOOD_CAKE',tag: '8',price:1600,inCart: 0
				},{
					name: 'UPSIDE_DOWN_CAKE',tag: '9',price:1400,inCart: 0
				},{
					name: 'DEVIL_FOOD_CAKE',tag: '10',price:1600,inCart: 0
				},{
					name: 'HUMMINGBIRD_CAKE',tag: '11',price:1300,inCart: 0
				},{
					name: 'OPERA_CAKE',tag: '12',price:1000,inCart: 0
				}
			]
			// Adding Event Listeners to all the products
			for (let i=0;i<carts.length; i++){
			     carts[i].addEventListener('click',()=>{
			         cartNumbers(products[i]);
					 totalCost(products[i])
			     })
			}
			// To load No of items in cart whenever page is reloaded
			function onLoadCartNumbers(){
			    let productNumbers=localStorage.getItem('cartNumber');
			    if(productNumbers){
			        document.querySelector('.cart span').textContent=productNumbers;
			    }
			}

			// To calculate the number of products added in the cart
			function cartNumbers(product){
			    let productNumbers=localStorage.getItem('cartNumber');
			    productNumbers=parseInt(productNumbers);

			    if(productNumbers){
			        localStorage.setItem('cartNumber',productNumbers+1);
			        document.querySelector('.cart span').textContent=productNumbers + 1;
			    }
			    else{
			        localStorage.setItem('cartNumber',1);
			        document.querySelector('.cart span').textContent=1;
			    }

				setItems(product);
			}

			// To add JSON files into local storage whenever a new product is added to the cart
			function setItems(product){
				let cartItems=localStorage.getItem('productsInCart');
				cartItems=JSON.parse(cartItems);

				if(cartItems != null){
					if(cartItems[product.tag] == undefined){
						cartItems={
							...cartItems,
							[product.tag]: product
						}
					}
					cartItems[product.tag].inCart +=1;
				}
				else{
					product.inCart = 1;
					cartItems = {
						[product.tag]: product
					}
				}

				localStorage.setItem("productsInCart",JSON.stringify(cartItems));
			}

			function totalCost(product){
				let cartCost=localStorage.getItem('totalCost');

				if(cartCost != null){
					cartCost=parseInt(cartCost);
					localStorage.setItem('totalCost', cartCost + product.price);
				}else{
					localStorage.setItem('totalCost',product.price);
				}
			}

			onLoadCartNumbers();

		</script>
	</body>
</html>